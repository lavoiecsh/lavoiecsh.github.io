<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-post-page plugin-blog plugin-id-default">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">(Soft|Firm|Hard)ware | Proper Code</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://lavoiecsh.github.io/2018/11/13/ware"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" property="og:title" content="(Soft|Firm|Hard)ware | Proper Code"><meta data-rh="true" name="description" content="The computer, phone or tablet you&#x27;re reading this on is hardware. The browser that renders it is software. Firmware is somewhere in between. But is it that simple?"><meta data-rh="true" property="og:description" content="The computer, phone or tablet you&#x27;re reading this on is hardware. The browser that renders it is software. Firmware is somewhere in between. But is it that simple?"><meta data-rh="true" property="og:type" content="article"><meta data-rh="true" property="article:published_time" content="2018-11-13T00:00:00.000Z"><meta data-rh="true" property="article:tag" content="Practices"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://lavoiecsh.github.io/2018/11/13/ware"><link data-rh="true" rel="alternate" href="https://lavoiecsh.github.io/2018/11/13/ware" hreflang="en"><link data-rh="true" rel="alternate" href="https://lavoiecsh.github.io/2018/11/13/ware" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/rss.xml" title="Proper Code RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/atom.xml" title="Proper Code Atom Feed">
<link rel="alternate" type="application/json" href="/feed.json" title="Proper Code JSON Feed"><link rel="stylesheet" href="/assets/css/styles.b0373047.css">
<link rel="preload" href="/assets/js/runtime~main.d11a6d16.js" as="script">
<link rel="preload" href="/assets/js/main.c95f09e2.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="Proper Code" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo.svg" alt="Proper Code" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Proper Code</b></a><a class="navbar__item navbar__link" href="/tags">Tags</a><a href="https://github.com/lavoiecsh/code" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Code Samples<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_pO2u margin-bottom--md">Recent posts</div><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2023/05/22/docusaurus">Docusaurus</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2022/01/06/english">Blog Update: English Only</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2022/01/05/advent2021">Advent of Code 2021 Recap</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2021/11/20/advent2021">Advent of Code 2021</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2020/10/15/thinking-in-resolvers">Thinking in resolvers</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><article itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h1 class="title_f1Hy" itemprop="headline">(Soft|Firm|Hard)ware</h1><div class="container_mt6G margin-vert--md"><time datetime="2018-11-13T00:00:00.000Z" itemprop="datePublished">November 13, 2018</time> Â· <!-- -->5 min read</div></header><div id="__blog-post-container" class="markdown" itemprop="articleBody"><p>The computer, phone or tablet you&#x27;re reading this on is hardware. The browser that renders it is software. Firmware is somewhere in between. But is it that simple?</p><p>I&#x27;ve recently read Clean Architecture by Uncle Bob and loved his definitions of software and hardware:</p><ul><li>hardware is anything that is <strong>hard</strong>, rigid, difficult to modify</li><li>software on the contrary is <strong>soft</strong>, malleable, easy to modify</li><li>firmware is <strong>firm</strong>, not as hard as hardware, nor as soft as software</li></ul><p>These definitions might sound simplistic, but their simplicity helps greatly in understanding software development.</p><p>When developing software you can&#x27;t switch out physical components of the machine on which the software is running, nor can you know when the user will do so, so you must develop your software to be as independent of the hardware as possible. You cannot switch out the operating system or drivers of the machine running your software either, so you must ensure that this is separated from your software as well. Some frameworks like Android&#x27;s java framework, C#&#x27;s .NET framework could also be referred to as firmware.</p><p>Of course when developing you will have to connect to some hardware or firmware. The important thing to remember is that you want these connections to be isolated from the domain, ideally as a plugin to your software. This will mean that your software can easily be ported to another hardware/firmware without too much work.</p><p>But the advantage doesn&#x27;t only lie in the ease of porting the software. It also lies in the ease of modifying and testing of the software. If the hardware or firmware updates, you have a lot less code to modify and inversely if you modify business logic, you don&#x27;t need to worry about hardware and firmware bridges. Unit testing pure OO logic is easy to do, but unit testing hardware and firmware is very difficult. This is as true for web developers or game developers as it is for embedded developers.</p><p>So what can you do to reduce the coupling between software and firmware/hardware? Move all the code that refers to firmware into a separate project/assembly/module and make it implement an interface that is defined in your software. You&#x27;ll probably notice you can refactor a lot of the code you just extracted because there is a lot of duplication.</p><p>I&#x27;ll end this with a short example. As many of you know, there&#x27;s been an update to the GDPR and software must now ask for permissions to use certain data (instead of having those permissions granted to us implicitly). Here&#x27;s an example of Android code that shows a popup to the user if he hasn&#x27;t answered the question yet, saves his answer and let&#x27;s him continue if he accepts or logs him out of the system if he refuses.</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">//...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class LoginActivity {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void login(User user) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (user.complianceAcceptanceIsValid()) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Intent = new Intent(context, DashboardActivity.class);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            startActivity(intent);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        new AlertDialog.Builder(context)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .setTitle(&quot;Compliance Acceptance&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .setMessage(R.strings.gdpr_compliance)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .setPositiveButton(&quot;Accept&quot;, new DialogInterface.OnClickListener() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                public void onClick(DialogInterface dialog, int which) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    user.onComplianceAccepted(Calendar.getInstance().getTime());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    Intent intent = new Intent(context, DashboardActivity.class);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    startActivity(intent);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            })</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .setNegativeButton(&quot;Decline&quot;, new DialogInterface.OnClickListener() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                public void onClick(DialogInterface dialog, int which) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    user.logout();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    Intent intent = new Intent(context, LoginActivity.class);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    startActivity(intent);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            })</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .create()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .show();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Now what is the problem with this code? You have logic code pertaining to the compliance (checking if the user already answer the question, saving the answer, logging the user out) mixed in with an Android Dialog, mixed in with what to do after the user answer the dialog. It&#x27;s very hard to test, and if Android decides to change the API for the AlertDialog, or even remove it, you will probably have a lot of changes to make.</p><p>So how can we fix this? By moving the Dialog part into another module:</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">//...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class LoginActivity {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private ComplianceDialog complianceDialog;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void login(User user) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        complianceDialog.askForCompliance(user, new Dialog.Handler() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            public void onAccept() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Intent intent = new Intent(this, DashboardActivity.class);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                startActivity(intent);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            public void onDecline() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Intent intent = new Intent(this, LoginActivity.class);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                startActivity(intent);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">//...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class ComplianceDialog {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private Dialog dialog;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public ComplianceDialog(Dialog dialog) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.dialog = dialog;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void askForCompliance(User user, final Dialog.Handler handler) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (user.complianceAcceptanceIsValid()) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            handler.onAccept();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        dialog.show(&quot;Compliance Acceptance&quot;, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            R.strings.gdpr_compliance,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;Accept&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;Decline&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            new Dialog.Handler() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                public void onAccept() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    user.onComplianceAccepted(Calendar.getInstance().getTime());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    handler.onAccept();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                public void onDecline() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    user.logout();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    handler.onDecline();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public interface Dialog {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    void show(String title, String message, String accept, String decline, Dialog.Handler handler);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static class Handler {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        public void onAccept() { }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        public void onDecline() { }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">//...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class DialogImpl implements Dialog {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private Context context;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public Dialog(Context context) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.context = context;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void show(String title, String message, String accept, String decline, Dialog.Handler handler) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        new AlertDialog.Builder(context)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .setTitle(title)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .setMessage(message)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .setPositiveButton(accept, new DialogInterface.OnClickListener() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                public void onClick(DialogInterface dialog, int which) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    handler.onAccept();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            })</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .setNegativeButton(decline, new DialogInterface.OnClickListener() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                public void onClick(DialogInterface dialog, int which) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    handler.onDecline();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            })</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .create();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .show();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Now all the user interaction is within one class (ComplianceDialog), the dialog showing is in another class (DialogImpl) and the next activity responsibility is given yet another class (LoginActivity), meaning it can be reused more easily. The ComplianceDialog does not depend on the Android firmware at all. This also allows us to easily test the ComplianceDialog class by mocking or faking the Dialog interface we pass in. The Dialog interface can also be reused anywhere we need a yes/no dialog to be shown (which often happens) so we can probably refactor a lot of the other uses of AlertDialog in the code with this pattern without too much work.</p></div><footer class="row docusaurus-mt-lg blogPostFooterDetailsFull_mRVl"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/practices">Practices</a></li></ul></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/2018/11/20/cleanarchitecture"><div class="pagination-nav__sublabel">Newer Post</div><div class="pagination-nav__label">Book Review: Clean Architecture</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/2018/11/06/gangoffour"><div class="pagination-nav__sublabel">Older Post</div><div class="pagination-nav__label">Book Review: Gang of Four</div></a></nav></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/about-me">About me</a></li></ul></div><div class="col footer__col"><div class="footer__title">Links</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.linkedin.com/in/sebastien-lavoie-courchesne/" target="_blank" rel="noopener noreferrer" class="footer__link-item">LinkedIn<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/lavoiecsh" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Feeds</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/rss.xml">RSS</a></li><li class="footer__item"><a class="footer__link-item" href="/atom.xml">Atom</a></li><li class="footer__item"><a class="footer__link-item" href="/feed.json">JSON</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2023 Sebastien Lavoie-Courchesne.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.d11a6d16.js"></script>
<script src="/assets/js/main.c95f09e2.js"></script>
</body>
</html>