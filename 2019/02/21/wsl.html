<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-post-page plugin-blog plugin-id-default">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">WSL (or why I won&#x27;t make Linux VMs in Windows) | Proper Code</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://lavoiecsh.github.io/2019/02/21/wsl"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" property="og:title" content="WSL (or why I won&#x27;t make Linux VMs in Windows) | Proper Code"><meta data-rh="true" name="description" content="Windows Subsystem for Linux (WSL) has been out for a couple of years now and many people have put in a lot of work to make it even better. It all started with the Bash on Ubuntu on Windows, but has since evolved to accept different distributions (there are a couple available in the Microsoft Store and you can install some yourself). It has been improved to the point that I don&#x27;t see the point in running a Linux VM in Windows (unless you want other utilities of VMs such as copying the whole system or such)."><meta data-rh="true" property="og:description" content="Windows Subsystem for Linux (WSL) has been out for a couple of years now and many people have put in a lot of work to make it even better. It all started with the Bash on Ubuntu on Windows, but has since evolved to accept different distributions (there are a couple available in the Microsoft Store and you can install some yourself). It has been improved to the point that I don&#x27;t see the point in running a Linux VM in Windows (unless you want other utilities of VMs such as copying the whole system or such)."><meta data-rh="true" property="og:type" content="article"><meta data-rh="true" property="article:published_time" content="2019-02-21T00:00:00.000Z"><meta data-rh="true" property="article:tag" content="Technologies,WSL"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://lavoiecsh.github.io/2019/02/21/wsl"><link data-rh="true" rel="alternate" href="https://lavoiecsh.github.io/2019/02/21/wsl" hreflang="en"><link data-rh="true" rel="alternate" href="https://lavoiecsh.github.io/2019/02/21/wsl" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/rss.xml" title="Proper Code RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/atom.xml" title="Proper Code Atom Feed">
<link rel="alternate" type="application/json" href="/feed.json" title="Proper Code JSON Feed"><link rel="stylesheet" href="/assets/css/styles.b0373047.css">
<link rel="preload" href="/assets/js/runtime~main.16844ca8.js" as="script">
<link rel="preload" href="/assets/js/main.051f09a9.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="Proper Code" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo.svg" alt="Proper Code" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Proper Code</b></a><a class="navbar__item navbar__link" href="/tags">Tags</a><a href="https://github.com/lavoiecsh/code" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Code Samples<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_pO2u margin-bottom--md">Recent posts</div><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2023/05/22/docusaurus">Docusaurus</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2022/01/06/english">Blog Update: English Only</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2022/01/05/advent2021">Advent of Code 2021 Recap</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2021/11/20/advent2021">Advent of Code 2021</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2020/10/15/thinking-in-resolvers">Thinking in resolvers</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><article itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h1 class="title_f1Hy" itemprop="headline">WSL (or why I won&#x27;t make Linux VMs in Windows)</h1><div class="container_mt6G margin-vert--md"><time datetime="2019-02-21T00:00:00.000Z" itemprop="datePublished">February 21, 2019</time> · <!-- -->5 min read</div></header><div id="__blog-post-container" class="markdown" itemprop="articleBody"><p>Windows Subsystem for Linux (WSL) has been out for a couple of years now and many people have put in a lot of work to make it even better. It all started with the Bash on Ubuntu on Windows, but has since evolved to accept different distributions (there are a couple available in the Microsoft Store and you can install some yourself). It has been improved to the point that I don&#x27;t see the point in running a Linux VM in Windows (unless you want other utilities of VMs such as copying the whole system or such).</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="what-exactly-is-wsl">What exactly is WSL<a href="#what-exactly-is-wsl" class="hash-link" aria-label="Direct link to What exactly is WSL" title="Direct link to What exactly is WSL">​</a></h3><p>The Windows Subsystem for Linux is actually a recompiled Linux kernel that runs on top of Windows. You can now install multiple different distributions of Linux along side one another and switch between them (since Windows update 1809 in October 2018) using their wsl executable.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="how-i-started-using-wsl">How I started using WSL<a href="#how-i-started-using-wsl" class="hash-link" aria-label="Direct link to How I started using WSL" title="Direct link to How I started using WSL">​</a></h3><p>Not long after I started university I switched to using Linux as my main work operating system (although I still kept a Windows partition/computer for games and such). I find myself much more productive using a linux shell than Windows&#x27; cmd or PowerShell. The tools are also much more powerful and can offer a lot more utility. The companies I worked at were using Windows and developing applications for Windows so I didn&#x27;t have a choice to use that as my main work environment, but I always tried to use some Linux knowledge and tools when working. It started with Cygwin and that lasted for a while until Ubuntu on Windows came out. Although WSL&#x27;s first versions were sometimes buggy and didn&#x27;t allow much, it was still an improvement and now I&#x27;m very happy with the environment I set up. </p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="what-i-like-about-wsl">What I like about WSL<a href="#what-i-like-about-wsl" class="hash-link" aria-label="Direct link to What I like about WSL" title="Direct link to What I like about WSL">​</a></h3><p>The integration between Linux and Windows is very well made. The fact that you&#x27;re actually running a Linux kernel inside of Windows means that you&#x27;ll be able to run any application with currently runs on Linux natively without needing to recompile them or run them in a virtual machine. You&#x27;re not limited to a certain amount of threads/processor usage/memory/disk space as you would with a virtual machine either so you can run very demanding programs without running any problems. The fact that you aren&#x27;t booting a computer also means that starting a new instance is practically instantaneous. You can also run any distribution you want and get the tailored tools they offer.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="how-i-set-up-my-wsl">How I set up my WSL<a href="#how-i-set-up-my-wsl" class="hash-link" aria-label="Direct link to How I set up my WSL" title="Direct link to How I set up my WSL">​</a></h3><p>I won&#x27;t explain how to set up the default WSL tools, there are many guides for those. I will however explain what I did after that.</p><p>When you first activate WSL, it comes with an Ubuntu installation as the default distribution, but you can install other distribution from the Microsoft Store or install you&#x27;re own distribution with the WSL api that Windows provides. The only problem is that the function isn&#x27;t easily available so you need to access it with some <a href="https://github.com/lavoiecsh/lavoiecsh.github.io/blob/master/code/other/WSLInstaller.c" target="_blank" rel="noopener noreferrer">code</a> which you need to compile and execute passing in the distribution name you want to set for wsl and the filename of a distribution installation media compressed in tar.gz format. I used this to install a stage3 version of Gentoo, which is my favourite distribution so far. For those that want to use Gentoo, simply follow the <a href="https://wiki.gentoo.org/wiki/Handbook:AMD64" target="_blank" rel="noopener noreferrer">handbook</a> starting with MAKEOPTS and portage set up (Skip the chrooting and kernel parts).</p><p>Although I&#x27;m using tmux, I like using ConEmu to launch the distribution once I have it set up because I usually just leave it open and can add tabs for other prompts (cmd, powershell) whenever I need. The ConEmu task is set to run <code>wsl.exe -d gentoo -u lavoiecsh</code>. The only problem with the Windows console (and ConEmu) is that some of the keybindings are broken (Ctrl-Space, Ctrl-Backspace), so I&#x27;ve decided to run my emacs using X (more on that shortly).</p><p>Another tool I installed is VcXsrv. This is a Visual C compiled version of the X server for Linux. It runs inside Windows and creates a display that graphical applications in Linux can use to display themselves. Once you&#x27;ve installed it, run the XLaunch.exe tool in the default folder and select Multiple Applications. Save the configuration at the end of the XLaunch wizard and create a link to it in your start up folder (<code>%APPDATA%\Microsoft\Windows\Start Menu\Programs\Start-up</code>) so that it will launch when you start Windows. This will create a display (<code>:0.0</code> by default) that your linux applications can use. Once XLaunch is running (it only displays an icon in the launch bar), when you launch a graphical application in Linux it will start it in a new window.</p><p>With VcXsrv installed and running, I usually start emacs to get a windowed server running (by adding <code>(server-start)</code> in my initialization file). After that, whenever I need to edit a file, I can look it up with emacs, or run <code>emacsclient -nqu &lt;filename&gt;</code> (aliased to <code>em</code> in my case) to send it to the emacs server from the console.</p><p>I chose not to run a full graphical interface (window manager or desktop manager) since I barely use graphical tools with linux and I find that having WSL running inside ConEmu with tmux gives me all the bash prompts I need and having emacs running with VcXsrv gives me all the edition tools I need (while also circumventing the keybinding problems that the Windows console has). </p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a href="#conclusion" class="hash-link" aria-label="Direct link to Conclusion" title="Direct link to Conclusion">​</a></h3><p>WSL is now very powerful, especially when combined with tools such as ConEmu and VcXsrv. I am confident that I will be using it for a while and that more developments will continue on it in the next couple of years.</p></div><footer class="row docusaurus-mt-lg blogPostFooterDetailsFull_mRVl"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/technologies">Technologies</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/wsl">WSL</a></li></ul></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/2019/03/03/jekyll-javascript"><div class="pagination-nav__sublabel">Newer Post</div><div class="pagination-nav__label">Jekyll, pagination, categorizing and Javascript</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/2019/02/12/agile-principles-patterns-practices"><div class="pagination-nav__sublabel">Older Post</div><div class="pagination-nav__label">Book Review: Agile Principles, Patterns, and Practices in C#</div></a></nav></main><div class="col col--2"><div class="tableOfContents_bqdL thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#what-exactly-is-wsl" class="table-of-contents__link toc-highlight">What exactly is WSL</a></li><li><a href="#how-i-started-using-wsl" class="table-of-contents__link toc-highlight">How I started using WSL</a></li><li><a href="#what-i-like-about-wsl" class="table-of-contents__link toc-highlight">What I like about WSL</a></li><li><a href="#how-i-set-up-my-wsl" class="table-of-contents__link toc-highlight">How I set up my WSL</a></li><li><a href="#conclusion" class="table-of-contents__link toc-highlight">Conclusion</a></li></ul></div></div></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/about-me">About me</a></li></ul></div><div class="col footer__col"><div class="footer__title">Links</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.linkedin.com/in/sebastien-lavoie-courchesne/" target="_blank" rel="noopener noreferrer" class="footer__link-item">LinkedIn<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/lavoiecsh" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Feeds</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/rss.xml">RSS</a></li><li class="footer__item"><a class="footer__link-item" href="/atom.xml">Atom</a></li><li class="footer__item"><a class="footer__link-item" href="/feed.json">JSON</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 Sebastien Lavoie-Courchesne.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.16844ca8.js"></script>
<script src="/assets/js/main.051f09a9.js"></script>
</body>
</html>