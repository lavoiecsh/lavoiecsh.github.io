<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-post-page plugin-blog plugin-id-default">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">CrudRepository is an anti-pattern | Proper Code</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://lavoiecsh.github.io/2019/05/22/crudrepository"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" property="og:title" content="CrudRepository is an anti-pattern | Proper Code"><meta data-rh="true" name="description" content="CrudRepositories may seem like a nice way to boost productivity, but I think they lead to bad design and I&#x27;ll explain why."><meta data-rh="true" property="og:description" content="CrudRepositories may seem like a nice way to boost productivity, but I think they lead to bad design and I&#x27;ll explain why."><meta data-rh="true" property="og:type" content="article"><meta data-rh="true" property="article:published_time" content="2019-05-22T00:00:00.000Z"><meta data-rh="true" property="article:tag" content="Practices"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://lavoiecsh.github.io/2019/05/22/crudrepository"><link data-rh="true" rel="alternate" href="https://lavoiecsh.github.io/2019/05/22/crudrepository" hreflang="en"><link data-rh="true" rel="alternate" href="https://lavoiecsh.github.io/2019/05/22/crudrepository" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/rss.xml" title="Proper Code RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/atom.xml" title="Proper Code Atom Feed">
<link rel="alternate" type="application/json" href="/feed.json" title="Proper Code JSON Feed"><link rel="stylesheet" href="/assets/css/styles.b0373047.css">
<link rel="preload" href="/assets/js/runtime~main.d11a6d16.js" as="script">
<link rel="preload" href="/assets/js/main.c95f09e2.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="Proper Code" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo.svg" alt="Proper Code" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Proper Code</b></a><a class="navbar__item navbar__link" href="/tags">Tags</a><a href="https://github.com/lavoiecsh/code" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Code Samples<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_pO2u margin-bottom--md">Recent posts</div><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2023/05/22/docusaurus">Docusaurus</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2022/01/06/english">Blog Update: English Only</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2022/01/05/advent2021">Advent of Code 2021 Recap</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2021/11/20/advent2021">Advent of Code 2021</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2020/10/15/thinking-in-resolvers">Thinking in resolvers</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><article itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h1 class="title_f1Hy" itemprop="headline">CrudRepository is an anti-pattern</h1><div class="container_mt6G margin-vert--md"><time datetime="2019-05-22T00:00:00.000Z" itemprop="datePublished">May 22, 2019</time> · <!-- -->6 min read</div></header><div id="__blog-post-container" class="markdown" itemprop="articleBody"><p>CrudRepositories may seem like a nice way to boost productivity, but I think they lead to bad design and I&#x27;ll explain why.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="first-off-what-is-a-crudrepository">First off, what is a CrudRepository?<a href="#first-off-what-is-a-crudrepository" class="hash-link" aria-label="Direct link to First off, what is a CrudRepository?" title="Direct link to First off, what is a CrudRepository?">​</a></h3><p>In Domain Driven Design, a repository is an object used to access persisted information, usually in a database. It provides methods for accessing certain objects and modifying them. CRUD is the smallest set of methods that can be used to work with your data. It consists of four explicitly named methods: Create, Read, Update, Delete. A CrudRepository is a class implementing these four methods. These are usually generic, and sometimes even automatically generated (see Spring). They usually look something like this:</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public class CrudRepository&lt;T&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   public int create(T t) {...}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   public T read(int id) {...}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   public void update(T t) {...}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   public void delete(T t) {...}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="it-leads-to-layered-architecture">It leads to layered architecture<a href="#it-leads-to-layered-architecture" class="hash-link" aria-label="Direct link to It leads to layered architecture" title="Direct link to It leads to layered architecture">​</a></h3><p>So the first problem I see with this is that it will usually lead to a layered architecture in the sense that your domain objects will now depend on database objects. The class your passing to this CrudRepository will contain information that pertains to the database, either through annotations or by the class being a direct mapping of a specific table. One of two things will usually happen once you start using this pattern: </p><ol><li>You might use domain objects, but your domain services will have to translate those into database objects and vice-versa to use the repository. This adds an extra responsibility to your domain services, making them harder to read.</li><li>You will simply use those database objects everywhere in your application, forcing your to write your services to contain all the domain logic and not having domain objects that contain their specific logic.</li></ol><p>Another big point to note with layered architecture is that whenever you change your database schema, you will likely have to change bits and pieces in all of your code. This will become harder and harder going further and take more and more time to complete.</p><p>Domain Driven Design encourages a clean separation between your domain objects and your database to reduce this problem. You should have a repository interface that resides within your domain and uses domain objects and the implementation should handle the translation between the domain objects and the database objects. A database change will then only affect your database objects and implementation of the repositories, but nothing else.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="how-can-you-fix-this">How can you fix this?<a href="#how-can-you-fix-this" class="hash-link" aria-label="Direct link to How can you fix this?" title="Direct link to How can you fix this?">​</a></h3><p>As mentioned earlier, you should have a repository interface inside your domain that uses domain objects. Something like this:</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public interface EmployeeRepository {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public Employee createNewEmployee(String firstName, String lastName, String email, ...);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public Employee getEmployeeById(int id);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public Employee getEmployeeByEmail(String email);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void saveEmployee(Employee employee);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void deleteEmployee(Employee employee);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Your implementation will then have to translate between your domain objects (Employee in this case) and your database objects. This class can use the CrudRepository if you want to:</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public class SqlEmployeeRepository : EmployeeRepository {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private CrudRepository&lt;DbEmployee&gt; crud;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public Employee createNewEmployee(String firstName, String lastName, String email, ...) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Employee employee = new Employee(firstName, lastName, email);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        DbEmployee dbEmployee = new DbEmployee(employee);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        employee.id = crud.create(dbEmployee);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return employee;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public getEmployeeById(int id) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return crud.read(id).toEmployee();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void saveEmployee(Employee employee) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        crud.update(new DbEmployee(employee));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void deleteEmployee(Employee employee) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        crud.delete(new DbEmployee(employee))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Now, whenever you change the database schema, you only need to change the database object (DbEmployee) and the implementation of the repository (SqlEmployeeRepository). If your domain doesn&#x27;t need this added information, you can just ignore it. This is especially useful when working with a database that may be used by other application within your company. You probably don&#x27;t care about half of the information in the database, so why force yourself to map it exactly? Create domain objects that contain just the information you need for your application and let the repository and database objects extract the pertinent information from the database.</p><p>Having the translation between the domain objects and the database objects in the repository also simplifies your domain services, making it easier to add new features or modify existing ones, and reducing the risk of errors in these objects.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="so-why-move-away-from-crud-repositories-if-you-must-work-more">So why move away from crud repositories if you must work more?<a href="#so-why-move-away-from-crud-repositories-if-you-must-work-more" class="hash-link" aria-label="Direct link to So why move away from crud repositories if you must work more?" title="Direct link to So why move away from crud repositories if you must work more?">​</a></h3><p>You&#x27;ll more easily separate your different logic types between each layer of your application and it&#x27;ll be easier to make modifications and understand your domain objects and services with this in mind in the long term.
Take for example these two version of the same employee hiring method of a domain service:</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public EmployeeService {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private CrudRepository&lt;EmployeeEntity&gt; repository;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private EmployeeEmailService emailService;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public EmployeeBean hireEmployee(String firstName, String lastName) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        String email = emailService.generateEmailForNewEmployee(firstName, lastName);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        EmployeeEntity entity = new EmployeeEntity(firstName, lastName, email);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        entity.id = repository.create(entity);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return new EmployeeBean.Builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .id(entity.id)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .firstName(entity.firstName)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .lastName(entity.lastName)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .email(entity.email);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public EmployeeService {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private EmployeeRepository repository;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private EmployeeEmailService emailService;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public Employee hireEmployee(String firstName, String lastName) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        String email = emailService.generateEmailForNewEmployee(firstName, lastName);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return repository.createNewEmployee(firstName, lastName, email);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>In the first instance, using a crud repository, you get polluted with translation between different object types representing the same concept (an employee). Only two of the eight lines are pertinent and they&#x27;re lost in the translation. For the second example, the two same lines doing application logic are the only two lines and it&#x27;s a lot easier to read this way.</p><p>Another clear advantage is when you unit test these methods. The first example will force you to compare the EmployeeBean object your method return with the EmployeeEntity your mocked repository&#x27;s method returned. If you then add a new field to your EmployeeBean or EmployeeEntity, you might miss this translation, but your test will still pass, probably breaking something down the line. In the second example, if you make your repository return an object and directly compare it to the object returned by the method, there&#x27;s no way your comparison will fail, and if there are ever changes to your database schemas or domain objects, this code will still function correctly because it doesn&#x27;t contain the translation.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a href="#conclusion" class="hash-link" aria-label="Direct link to Conclusion" title="Direct link to Conclusion">​</a></h3><p>Remember that an interface belongs to it&#x27;s user, not it&#x27;s implementer. Since the user of the repository is the service, the repository&#x27;s interface belongs to the service and should talk in terms of domain objects, simplifying the service using it.</p></div><footer class="row docusaurus-mt-lg blogPostFooterDetailsFull_mRVl"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/practices">Practices</a></li></ul></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/2019/06/04/service"><div class="pagination-nav__sublabel">Newer Post</div><div class="pagination-nav__label">&quot;Service&quot; should be a banned word</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/2019/04/16/growing-object-oriented-software-guided-by-tests"><div class="pagination-nav__sublabel">Older Post</div><div class="pagination-nav__label">Book Review: Growing Object-Oriented Software, Guided by Tests</div></a></nav></main><div class="col col--2"><div class="tableOfContents_bqdL thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#first-off-what-is-a-crudrepository" class="table-of-contents__link toc-highlight">First off, what is a CrudRepository?</a></li><li><a href="#it-leads-to-layered-architecture" class="table-of-contents__link toc-highlight">It leads to layered architecture</a></li><li><a href="#how-can-you-fix-this" class="table-of-contents__link toc-highlight">How can you fix this?</a></li><li><a href="#so-why-move-away-from-crud-repositories-if-you-must-work-more" class="table-of-contents__link toc-highlight">So why move away from crud repositories if you must work more?</a></li><li><a href="#conclusion" class="table-of-contents__link toc-highlight">Conclusion</a></li></ul></div></div></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/about-me">About me</a></li></ul></div><div class="col footer__col"><div class="footer__title">Links</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.linkedin.com/in/sebastien-lavoie-courchesne/" target="_blank" rel="noopener noreferrer" class="footer__link-item">LinkedIn<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/lavoiecsh" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Feeds</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/rss.xml">RSS</a></li><li class="footer__item"><a class="footer__link-item" href="/atom.xml">Atom</a></li><li class="footer__item"><a class="footer__link-item" href="/feed.json">JSON</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 Sebastien Lavoie-Courchesne.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.d11a6d16.js"></script>
<script src="/assets/js/main.c95f09e2.js"></script>
</body>
</html>