"use strict";(self.webpackChunkproper_code=self.webpackChunkproper_code||[]).push([[2582],{3905:(e,n,t)=>{t.d(n,{Zo:()=>u,kt:()=>y});var r=t(7294);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function l(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function i(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var s=r.createContext({}),c=function(e){var n=r.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):l(l({},n),e)),t},u=function(e){var n=c(e.components);return r.createElement(s.Provider,{value:n},e.children)},p="mdxType",f={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},m=r.forwardRef((function(e,n){var t=e.components,a=e.mdxType,o=e.originalType,s=e.parentName,u=i(e,["components","mdxType","originalType","parentName"]),p=c(t),m=a,y=p["".concat(s,".").concat(m)]||p[m]||f[m]||o;return t?r.createElement(y,l(l({ref:n},u),{},{components:t})):r.createElement(y,l({ref:n},u))}));function y(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var o=t.length,l=new Array(o);l[0]=m;var i={};for(var s in n)hasOwnProperty.call(n,s)&&(i[s]=n[s]);i.originalType=e,i[p]="string"==typeof e?e:a,l[1]=i;for(var c=2;c<o;c++)l[c]=t[c];return r.createElement.apply(null,l)}return r.createElement.apply(null,t)}m.displayName="MDXCreateElement"},2297:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>s,contentTitle:()=>l,default:()=>f,frontMatter:()=>o,metadata:()=>i,toc:()=>c});var r=t(7462),a=(t(7294),t(3905));const o={title:"New stuff in C#8: Nullable Reference Types",tags:["Technologies","C#"]},l=void 0,i={permalink:"/2019/03/19/cs8-nullable-reference-types",source:"@site/blog/2019/03-19-cs8-nullable-reference-types.md",title:"New stuff in C#8: Nullable Reference Types",description:"Today I'm starting a small series on new features coming to C#8.0, starting with Nullable Reference Types.",date:"2019-03-19T00:00:00.000Z",formattedDate:"March 19, 2019",tags:[{label:"Technologies",permalink:"/tags/technologies"},{label:"C#",permalink:"/tags/c"}],readingTime:2.28,hasTruncateMarker:!0,authors:[],frontMatter:{title:"New stuff in C#8: Nullable Reference Types",tags:["Technologies","C#"]},prevItem:{title:"Book Review: Growing Object-Oriented Software, Guided by Tests",permalink:"/2019/04/16/growing-object-oriented-software-guided-by-tests"},nextItem:{title:"Jekyll, pagination, categorizing and Javascript",permalink:"/2019/03/03/jekyll-javascript"}},s={authorsImageUrls:[]},c=[],u={toc:c},p="wrapper";function f(e){let{components:n,...t}=e;return(0,a.kt)(p,(0,r.Z)({},u,t,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"Today I'm starting a small series on new features coming to C#8.0, starting with Nullable Reference Types."),(0,a.kt)("p",null,"C# has a type system, like many other languages, which allows you to assign null to any non-primitive object (pretty much everything except integers, floating point numbers and characters). This means that whenever you receive a reference type through a function parameter or keep one as an instance variable, you need to make sure that it's not null before using it (or deal with the NullReferenceException). This also meant that you couldn't have nullable reference types (ex: ",(0,a.kt)("inlineCode",{parentName:"p"},"string?")," or ",(0,a.kt)("inlineCode",{parentName:"p"},"Person?"),")."),(0,a.kt)("p",null,"One of the new features coming is a compilation flag you can add to your project to make reference types require non-null values, while also allowing to create nullable reference types. This explicits the fact that your variable or parameter may be null and it's ok because you handle it."),(0,a.kt)("p",null,"The only downside right now in the preview is that it is not enforced at compilation time, it only shows a warning when you're not initializing a non-nullable reference type or when you use it:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-C#"},"class Person {\n    private string firstName; // non-nullable string\n    public string LastName { get; set; }\n    \n    public Person() {\n        // this constructor has the following warnings:\n        // Non-nullable field 'firstName' is uninitialized.\n        // Non-nullable property 'LastName' is uninitialized.\n        \n        // this should idealy not compile or initialize the field and property with default values\n    }\n    \n    public Person(Person copy) {\n        firstName = copy.firstName;\n        LastName = copy.LastName;\n    }\n    \n    public string FirstName() => firstName;\n}\n")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-C#"},"[TestClass]\nclass PersonTest {\n    [TestMethod]\n    public void CreatesPersonFromNothing() {\n        var person = new Person();\n        // both of these assertions will pass (although the field and property shouldn't be null) \n        // and show the following warnings:\n        // Cannot convert null literal to non-nullable reference or unconstrained type parameter.\n        Assert.AreEqual(null, person.FirstName());\n        Assert.AreEqual(null, person.LastName);\n        // this should fail because the field and property can't be null\n    }\n    \n    [TestMethod]\n    public void ThrowsExceptionWhenCreatingPersonFromNull() {\n        // this will show the warning: \n        // Cannot convert null literal to non-nullable reference or unconstrained type parameter.\n        Assert.ThrowsException<NullReferenceException>(() => new Person(null));\n        // this shouldn't compile because you're passing null to a non-nullable reference type\n    }\n}\n")),(0,a.kt)("p",null,"So all in all, I like this addition but would prefer having compilation errors and default initializations (empty string or parameter-less constructor). This would make sure you always have a value, either by initializing it for you in the case of fields and properties or by forcing you to pass a non-null value as a function parameter. Having the compilation flag means that we won't be coding defensively (making sure objects aren't null before using them), so we need a way to ensure our object isn't null at compilation time."))}f.isMDXComponent=!0}}]);